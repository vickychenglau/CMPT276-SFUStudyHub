<!DOCTYPE html>
<html>
<head>
  <% if @course_title.nil? %>
    <% provide :title, "Courses Messageboard" %>
  <% else %>
    <% provide :title, @course_title %>
  <% end %>
  <%= javascript_include_tag('application') %>
</head>

<% if @course_title.nil? %>
  <h1>All the topics</h1>
<% else %>
  <h1><%= @course_title%></h1>
<% end %>

<%= check_box_tag(:generalcheck, :general)%>
<%= label_tag(:generalcheck, "GENERAL") %>
<%= check_box_tag(:tutorcheck, :tutor) %>
<%= label_tag(:tutorcheck, "TUTOR") %>
<%= check_box_tag(:studygroupcheck, :studygroup) %>
<%= label_tag(:studygroupcheck, "STUDYGROUP") %>
<% if @topics.empty? %>
  <h2>Nothing to see here</h2>
<% end %>
<% @topics.each do |topic| %>
  <% if topic.title.nil? || topic.description.nil? %>
    </p> something is missing </p>
  <% else %>
    <p class= "<%= topic.description %>" ><%= link_to "[" << topic.description << "] " << topic.title, messageboard_path('show', id: topic.id) %></p>
    <% if current_user && current_user.role == 'admin' %>
      <p><%= link_to 'DELETE', messageboard_path(topic, :course => @course),
              method: :delete, data: {confirm: 'Are you sure?' } %></p>
    <% end %>
  <% end %>
<% end %>
</p>

<% if @course_title.nil? %>
<% else %>
  <% if current_user %>
    <%= link_to "Create New Topic", messageboard_path('new', :course => @course) %>
  <% end %>
<% end %>

<p><%= link_to "Back to Courses", :controller => 'courses', :action => 'index' %></p>

</html>
