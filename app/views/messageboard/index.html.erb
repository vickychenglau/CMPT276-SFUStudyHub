<!DOCTYPE html>
<html>
<head>
  <% if @course_title.nil? %>
    <% provide :title, "Courses Messageboard" %>
  <% else %>
    <% provide :title, @course_title %>
  <% end %>
  <%= javascript_include_tag('application') %>
</head>

<% if @course_title.nil? %>
  <h1> All Topics </h1>
<% else %>
  <h1> <%= @course_title %> </h1>
<% end %>

<%= check_box_tag(:generalcheck, :general)%>
<%= label_tag(:generalcheck, "GENERAL") %>
<%= check_box_tag(:tutorcheck, :tutor) %>
<%= label_tag(:tutorcheck, "TUTOR") %>
<%= check_box_tag(:studygroupcheck, :studygroup) %>
<%= label_tag(:studygroupcheck, "STUDYGROUP") %>
<% if @topics.empty? %>
  <h2>Nothing to see here.</h2>
<% end %>
<dl>
<% @topics.each do |topic| %>
  <% if topic.title.nil? || topic.description.nil? %>
    <dt> something is missing </dt>
  <% else %>
    <dt class= "<%= topic.description %>" ><%= link_to "[" << topic.description << "] " << topic.title, messageboard_path('show', id: topic.id) %></dt>
    <% if current_user && current_user.role == 'admin' %>
    <p>
      <small>
        <%= link_to 'Delete', messageboard_path(topic, :course => @course),
            method: :delete, data: {confirm: 'Are you sure?' } %>
        <%= link_to 'Edit', edit_messageboard_path(id: topic.id, :course => @course) %>
      </small>
    </p>
    <% end %>
  <% end %>
<% end %>
</dl>
<!--
  <% @topics.each do |topic| %>
    <div id = "<%= topic.description %>">
      <% if topic.title.nil? || topic.description.nil? %>
        <p> Topic title or description is missing. </p>
      <% else %>
        <h3>
          <%= link_to "[" << topic.description << "] " << topic.title, messageboard_path('show', id: topic.id, :course => @course) %>
        </h3>

        <% if current_user && current_user.role == 'admin' %>
          <p>
            <small>
              <%= link_to 'Delete', messageboard_path(topic, :course => @course),
                  method: :delete, data: {confirm: 'Are you sure?' } %>
              <%= link_to 'Edit', edit_messageboard_path(id: topic.id, :course => @course) %>
            </small>
          </p>
        <% end %>
      <% end %>
    </div>
  <% end %> -->

  <hr/>

  <%= link_to "Back to Courses", :controller => 'courses', :action => 'index' %>

  <% if @course_title.nil? %>
  <% else %>
    <% if current_user %>
      | <%= link_to "Create New Topic", messageboard_path('new', :course => @course) %>
    <% end %>
  <% end %>
</div>
